# ─────────────────────────────────────────────────────────────────────────────
#  JARVIS 2.0 // pf Firewall Rules
#  Usage: sudo pfctl -f scripts/pf-jarvis.conf -e
#  Disable: sudo pfctl -d
# ─────────────────────────────────────────────────────────────────────────────

# Macros
lan = "192.168.1.0/24"
jarvis_tcp_ports = "{ 22, 3000, 4222, 8222, 18900 }"

# Skip filtering on loopback
set skip on lo0

# Default: block all incoming
block in all

# Pass all outgoing traffic
pass out all keep state

# Allow incoming TCP on Jarvis ports from LAN only
pass in on en0 proto tcp from $lan to any port $jarvis_tcp_ports keep state
pass in on en1 proto tcp from $lan to any port $jarvis_tcp_ports keep state
pass in on en5 proto tcp from any to any port $jarvis_tcp_ports keep state

# Allow ICMP (ping) from LAN
pass in on en0 proto icmp from $lan
pass in on en1 proto icmp from $lan
